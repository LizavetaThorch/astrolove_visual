<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="=IE=edge">

    <title>Astro Love</title>

    <link rel="stylesheet" href="./css/mainPage.css">
</head>

<body>
    <div id="main">
        <h1>ASTRO LOVE</h1>
        <img src="./photos/intro.png" alt="INTRO" />
        <p> Давай знакомиться </p>

        <form id="astroForm">
            <!-- Поле для ввода имени -->
            <input type="text" id="name" name="name" placeholder="Введи имя" required />

            <!-- Поле для ввода даты рождения -->
            <div id="birthday">
                <select id="day" name="day" required>
                    <option value="">День</option>
                </select>
                <select id="month" name="month" required>
                    <option value="">Месяц</option>
                </select>
                <select id="year" name="year" required>
                    <option value="">Год</option>
                </select>
            </div>

            <!-- Поле для ссылки на соцсеть -->
            <input type="text" id="social" name="social" placeholder="Твоя соц. сеть" required />

            <button type="submit" id="save">Save</button>
        </form>
    </div>
    <script src="https://telegram.org/js/telegram-web-app.js?56"></script>
    <script src="./javaScript/mainPage.js"></script>
    <script>
        // Обработчик кнопки Save
        let tg = window. Telegram.WebApp;

        tg.expand();

        document.getElementById("save").addEventListener("click", () => {
            const name = document.getElementById("name").value;
            const day = document.getElementById("day").value;
            const month = document.getElementById("month").value;
            const year = document.getElementById("year").value;
            const social = document.getElementById("social").value;

            if (!name || !day || !month || !year || !social) {
                alert("Заполните все поля!");
                return;
            }

            console.log({
                name: name,
                birthday: `${day}.${month}.${year}`,
                social: social
            });

            if (window.Telegram.WebApp) {
                Telegram.WebApp.sendData(JSON.stringify({
                    name: name,
                    birthday: `${day}.${month}.${year}`,
                    social: social
                }));
            } else {
                alert("Telegram WebApp API не доступен!");
            }
        });

    </script>
</body>
</html>
